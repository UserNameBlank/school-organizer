import{a as r,t as b,c as ue,d as K,s as Fe,b as Ie}from"../chunks/disclose-version.BXtJ1W0_.js";import{t as ve,c as x,q as ye,r as w,v as d,w as fe,f as y,ax as G,s as u,i as Oe,m as s,ae as le,K as $,n as be}from"../chunks/utils.DRp8il40.js";import{d as Ve,s as k,e as Ne}from"../chunks/render.Bx7icutD.js";import{p as $e,r as ke,a as ie,i as we}from"../chunks/preload-helper.CTy181sv.js";import{h as Ce,f as Le,b as xe,j as Xe,g as Ye,e as De,c as de,i as He,$ as Ke,k as je}from"../chunks/Icon.UlmRfCyG.js";import{b as Se,c as g}from"../chunks/index-client.C_rSk1z8.js";import{t as Ge}from"../chunks/class.CFMqzgfh.js";import{a as Ae}from"../chunks/actions.C405odAk.js";import{t as Je,s as Qe,b as Ue,B as Pe,a as pe}from"../chunks/button.CoZVfdsq.js";import{s as Me}from"../chunks/index.CAlaWtPU.js";import{r as We,R as Ze,I as et,T as tt,P as rt}from"../chunks/index.BkizgWUL.js";import{D as at,T as qe,P as Ee,a as st,b as ot,c as Be,d as nt,C as Te}from"../chunks/index.RH1IVTR_.js";import{L as Re}from"../chunks/label.C4tfK78c.js";import"../chunks/legacy.B_at4KoE.js";import{t as ze}from"../chunks/Toaster.svelte_svelte_type_style_lang.D5QKA4gq.js";var lt=b("<div><!></div>");function ct(C,t){ve(t,!0);let i=$e(t,"ref",15,null),o=ke(t,["$$slots","$$events","$$legacy","ref","class","children"]);var a=lt();let n;var v=x(a);Me(v,()=>t.children??ye),w(a),Se(a,f=>i(f),()=>i()),d(()=>n=Ce(a,n,{class:Le("bg-card text-card-foreground rounded-lg border shadow-sm",t.class),...o})),r(C,a),fe()}var it=b("<div><!></div>");function dt(C,t){ve(t,!0);let i=$e(t,"ref",15,null),o=ke(t,["$$slots","$$events","$$legacy","ref","class","children"]);var a=it();let n;var v=x(a);Me(v,()=>t.children??ye),w(a),Se(a,f=>i(f),()=>i()),d(()=>n=Ce(a,n,{class:Le("flex flex-col space-y-1.5 p-6 pb-0",t.class),...o})),r(C,a),fe()}var ut=b("<div><!></div>");function vt(C,t){ve(t,!0);let i=$e(t,"ref",15,null),o=$e(t,"level",3,3),a=ke(t,["$$slots","$$events","$$legacy","ref","class","level","children"]);var n=ut();let v;var f=x(n);Me(f,()=>t.children??ye),w(n),Se(n,M=>i(M),()=>i()),d(()=>v=Ce(n,v,{role:"heading","aria-level":o(),class:Le("text-2xl font-semibold leading-none tracking-tight",t.class),...a})),r(C,n),fe()}var ft=(C,t)=>{C.preventDefault(),t.onedit({detail:{id:t.id}}),console.log("right click")},mt=b('<!> <div class="aspect-square w-8 translate-y-[-2px] rounded-full border-2 border-background"></div>',1),_t=b('<button class="rounded-md text-start transition delay-200 active:scale-95"><!></button>');function ht(C,t){ve(t,!0);var i=_t();i.__contextmenu=[ft,t];var o=x(i);g(o,()=>ct,(a,n)=>{n(a,{class:"pb-6",children:(v,f)=>{var M=ue(),J=y(M);g(J,()=>dt,(me,W)=>{W(me,{class:"flex flex-row items-center",children:(Z,_e)=>{var ae=mt(),Q=y(ae);g(Q,()=>vt,(se,ce)=>{ce(se,{class:"flex-1",children:(e,l)=>{G();var _=K();d(()=>k(_,t.name)),r(e,_)},$$slots:{default:!0}})});var he=u(Q,2);d(()=>xe(he,"style",`background-color: ${t.color??""};`)),r(Z,ae)},$$slots:{default:!0}})}),r(v,M)},$$slots:{default:!0}})}),w(i),Ae(i,(a,n)=>We(a,n),()=>({inEvents:["contextmenu"]})),Je(3,i,()=>Qe),r(C,i),fe()}Ve(["contextmenu"]);var gt=b('<div class="grid gap-4 rounded-md p-4"><div class="color-display flex h-10 w-full items-center justify-center rounded-md border-[1px] border-accent svelte-1qutvfr"><p class="text-lg text-white mix-blend-difference"> </p></div> <div class="picker relative h-56 w-56 rounded-md border-[1px] border-accent svelte-1qutvfr"><div class="marker relative h-3 w-3 rounded-full border-[1px] border-white svelte-1qutvfr"></div></div> <div class="hue w-full svelte-1qutvfr"><input class="hue-input w-full svelte-1qutvfr" step="1" type="range" min="0" max="360"></div></div>');function bt(C,t){ve(t,!0);let i=le(0),o=le(0),a=le(0),n=$e(t,"color",15,"#ffffff");function v(e){var l;n(J(e)),(l=t.onValueChange)==null||l.call(t,n())}function f(e,l,_){return Math.max(Math.min(e,_),l)}function M(e){const l=e.s/100,_=e.v/100;let j=l*_;const I=e.h/60;let m=j*(1-Math.abs(I%2-1));const c=_-j;j=j+c,m=m+c;const z=Math.floor(I)%6,L=[j,m,c,c,m,j][z],D=[m,j,j,m,c,c][z],ee=[c,c,m,j,j,m][z],N=Math.round(L*255),P=Math.round(D*255),q=Math.round(ee*255);return{r:N,g:P,b:q}}function J(e){return"#"+[e.r,e.g,e.b].map(l=>f(l,0,255).toString(16).padStart(2,"0")).join("")}function me(e){function l(c){const{pageX:z,pageY:L}=c instanceof MouseEvent?c:c.changedTouches[0],{left:D,top:ee,width:N,height:P}=e.getBoundingClientRect();$(i,f((z-D-window.scrollX)/N,0,1)*100),$(o,f((L-ee-window.scrollY)/P,0,1)*100)}function _(c){l(c)}function j(c){c.preventDefault(),c.stopPropagation()}function I(c){document.addEventListener("mousemove",_),document.addEventListener("touchmove",_),document.addEventListener("mouseup",m),document.addEventListener("touchend",m),document.addEventListener("click",j,{capture:!0}),l(c),c.preventDefault()}function m(){document.removeEventListener("mousemove",_),document.removeEventListener("touchmove",_),document.removeEventListener("mouseup",m),document.removeEventListener("touchend",m),setTimeout(()=>{document.removeEventListener("click",j,{capture:!0})},0)}return e.addEventListener("mousedown",I),e.addEventListener("touchstart",I),{destroy(){m(),e.removeEventListener("mousedown",I),e.removeEventListener("touchstart",I)}}}Oe(()=>{v(M({h:s(a),s:s(i),v:100-s(o)}))});var W=gt(),Z=x(W),_e=x(Z),ae=x(_e,!0);w(_e),w(Z);var Q=u(Z,2),he=x(Q);w(Q),Ae(Q,e=>me(e));var se=u(Q,2),ce=x(se);Xe(ce),w(se),w(W),d(()=>{xe(W,"style",`--current-hue: ${s(a)??""}; --current-color: ${n()??""};`),k(ae,n()),xe(he,"style",`top: ${s(o)??""}%; left: ${s(i)??""}%; transform: translate(-50%, -50%)`)}),Ue(ce,()=>s(a),e=>$(a,e)),r(C,W),fe()}var pt=b("<!> ",1),$t=b('<div class="mt-40 grid w-full items-center justify-center gap-4"><h3 class="scroll-m-20 text-2xl font-semibold tracking-tight"> </h3> <!></div>'),xt=b("<!> ",1),wt=b('<div class="grid gap-4 p-4"><!> <!></div>'),jt=b('<button class="aspect-square w-10 rounded-full border-0 border-foreground svelte-1y53qud" type="button"></button>'),Pt=b('<form class="mb-1 grid items-start gap-4 px-4"><div class="grid gap-2"><!> <!></div> <!> <div class="flex flex-wrap gap-2 p-2"><!> <!></div></form> <!>',1),Et=b("<!> <!> <!>",1),yt=b("<!> <!>",1),kt=b("<!> <!> <!>",1),Ct=b("<!> <!>",1);function Xt(C,t){ve(t,!0);const i=Fe(),o=()=>Ie(Ke,"$t",i);Oe(()=>{Ye.currentTab=o()("titles.subjects")});let a=ie(["#00E015","#E0A100","#003BE0","#E0004B","#50618F","#7700E0","#E04900","#71508F","#30615E","#E06397","#00BBE0","#E0CB00","#8B822E","#613045","#093949","#f08561"]),n=le(0),v=le("Mathe"),f=le(!1),M=le(!1),J=null;function me(e){a[a.length-1]=e}function W(){$(n,a.length-1),a.push("#ffffff")}async function Z(){try{const e={id:0,name:s(v),color:a[s(n)],homeworks:[]};de.addSubject(e),$(f,!1)}catch{ze.error(o()("subjects.name-already-exists",{values:{name:s(v)}}))}}async function _e(){$(f,!1);const e=J,l=await de.removeSubject(e);ze(o()("subjects.subject-removed",{values:{name:e.name}}),{action:{label:o()("ui.undo"),onClick:()=>{l(!1)}},onAutoClose:()=>l(!0),onDismiss:()=>l(!0)})}async function ae(){$(f,!1),J.name=s(v),s(n)!==-1&&(J.color=a[s(n)]),de.editSubject(J)}async function Q(e){$(M,!0);const l=de.get(e.detail.id);J=l,$(v,ie(l.name)),$(n,ie(a.indexOf(l.color))),$(f,!0)}function he(e){e.preventDefault(),s(M)?ae():Z()}var se=ue(),ce=y(se);g(ce,()=>at,(e,l)=>{l(e,{get open(){return s(f)},set open(_){$(f,ie(_))},children:(_,j)=>{var I=Ct(),m=y(I);we(m,()=>de.size===0,z=>{var L=$t(),D=x(L),ee=x(D,!0);d(()=>k(ee,o()("subjects.no-subjects"))),w(D);var N=u(D,2),P=be(()=>je(pe({variant:"outline"}),"h-16 transition active:scale-95"));g(N,()=>qe,(q,ge)=>{ge(q,{get class(){return s(P)},children:(te,U)=>{var S=pt(),oe=y(S);Ee(oe,{class:"mr-3"});var X=u(oe,1,!0);d(()=>k(X,o()("subjects.new-subject"))),r(te,S)},$$slots:{default:!0}})}),w(L),r(z,L)},z=>{var L=wt(),D=x(L);De(D,17,()=>de.subjects,P=>P.id,(P,q)=>{ht(P,{get id(){return s(q).id},get name(){return s(q).name},get color(){return s(q).color},onedit:Q})});var ee=u(D,2),N=be(()=>je(pe({variant:"outline"}),"h-16 w-full transition active:scale-95"));g(ee,()=>qe,(P,q)=>{q(P,{onclick:()=>$(M,!1),get class(){return s(N)},children:(ge,te)=>{var U=xt(),S=y(U);Ee(S,{class:"mr-3"});var oe=u(S,1,!0);d(()=>k(oe,o()("subjects.new-subject"))),r(ge,U)},$$slots:{default:!0}})}),w(L),r(z,L)});var c=u(m,2);g(c,()=>st,(z,L)=>{L(z,{children:(D,ee)=>{var N=kt(),P=y(N);g(P,()=>ot,(te,U)=>{U(te,{children:(S,oe)=>{var X=ue(),re=y(X);we(re,()=>s(M),O=>{var E=ue(),V=y(E);g(V,()=>Be,(A,Y)=>{Y(A,{children:(B,T)=>{G();var h=K();d(()=>k(h,o()("subjects.drawer.edit-subjects.title"))),r(B,h)},$$slots:{default:!0}})}),r(O,E)},O=>{var E=ue(),V=y(E);g(V,()=>Be,(A,Y)=>{Y(A,{children:(B,T)=>{G();var h=K();d(()=>k(h,o()("subjects.drawer.new-subject.title"))),r(B,h)},$$slots:{default:!0}})}),r(O,E)}),r(S,X)},$$slots:{default:!0}})});var q=u(P,2);g(q,()=>Ze,(te,U)=>{U(te,{onOpenChange:S=>S&&W(),children:(S,oe)=>{var X=Pt(),re=y(X),O=x(re),E=x(O);Re(E,{for:"name",children:(p,F)=>{G();var R=K();d(()=>k(R,o()("subjects.drawer.name-label"))),r(p,R)},$$slots:{default:!0}});var V=u(E,2);et(V,{autocomplete:"off",type:"text",id:"name",get value(){return s(v)},set value(p){$(v,ie(p))}}),w(O);var A=u(O,2);Re(A,{class:"mt-6",children:(p,F)=>{G();var R=K();d(()=>k(R,o()("subjects.drawer.color-label"))),r(p,R)},$$slots:{default:!0}});var Y=u(A,2),B=x(Y);De(B,17,()=>a,He,(p,F,R)=>{var ne=jt();ne.__click=()=>$(n,ie(R)),d(()=>{xe(ne,"aria-label",s(F)),xe(ne,"style",`background-color: ${s(F)??""};`),Ge(ne,"selected",R===s(n))}),r(p,ne)});var T=u(B,2),h=be(()=>je(pe({variant:"outline",size:"icon"}),"aspect-square !rounded-full  p-0"));g(T,()=>tt,(p,F)=>{F(p,{get class(){return s(h)},children:(R,ne)=>{Ee(R,{size:16})},$$slots:{default:!0}})}),w(Y),w(re);var H=u(re,2);g(H,()=>rt,(p,F)=>{F(p,{children:(R,ne)=>{bt(R,{onValueChange:me})},$$slots:{default:!0}})}),Ne("submit",re,he),r(S,X)},$$slots:{default:!0}})});var ge=u(q,2);g(ge,()=>nt,(te,U)=>{U(te,{class:"pt-2",children:(S,oe)=>{var X=ue(),re=y(X);we(re,()=>s(M),O=>{var E=Et(),V=y(E);Pe(V,{onclick:ae,children:(T,h)=>{G();var H=K();d(()=>k(H,o()("ui.save"))),r(T,H)},$$slots:{default:!0}});var A=u(V,2),Y=be(()=>pe({variant:"outline"}));g(A,()=>Te,(T,h)=>{h(T,{get class(){return s(Y)},children:(H,p)=>{G();var F=K();d(()=>k(F,o()("ui.cancel"))),r(H,F)},$$slots:{default:!0}})});var B=u(A,2);Pe(B,{variant:"destructive",onclick:_e,children:(T,h)=>{G();var H=K();d(()=>k(H,o()("ui.delete"))),r(T,H)},$$slots:{default:!0}}),r(O,E)},O=>{var E=yt(),V=y(E);Pe(V,{onclick:Z,children:(B,T)=>{G();var h=K();d(()=>k(h,o()("ui.save"))),r(B,h)},$$slots:{default:!0}});var A=u(V,2),Y=be(()=>pe({variant:"outline"}));g(A,()=>Te,(B,T)=>{T(B,{get class(){return s(Y)},children:(h,H)=>{G();var p=K();d(()=>k(p,o()("ui.cancel"))),r(h,p)},$$slots:{default:!0}})}),r(O,E)}),r(S,X)},$$slots:{default:!0}})}),r(D,N)},$$slots:{default:!0}})}),r(_,I)},$$slots:{default:!0}})}),r(C,se),fe()}Ve(["click"]);export{Xt as component};
