import{c as H,a as o,s as Y,t as j,d as C,b as Z}from"../chunks/disclose-version.BXtJ1W0_.js";import{f as S,t as ee,i as te,w as re,m as e,v as i,n as g,c as n,r as l,s as b}from"../chunks/utils.DRp8il40.js";import{s as c}from"../chunks/render.Bx7icutD.js";import{l as ae,s as oe,i as y}from"../chunks/preload-helper.CTy181sv.js";import{I as se,s as ne,e as le,g as ce,i as de,$ as ie,a as me,b as O,c as M,d as Q,f as ve,t as pe}from"../chunks/Icon.Or52Z2gw.js";import{t as ue,s as _e}from"../chunks/class.CFMqzgfh.js";import{s as xe}from"../chunks/style.PwPRnE0L.js";import{t as fe}from"../chunks/timetabletimes.DIara230.js";import"../chunks/legacy.B_at4KoE.js";import{C as he}from"../chunks/check.Cive-MW1.js";function ge(P,A){const q=ae(A,["children","$$slots","$$events","$$legacy"]);se(P,oe({name:"circle-check"},()=>q,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m9 12 2 2 4-4"}]],children:(z,$)=>{var k=H(),T=S(k);ne(T,A,"default",{},null),o(z,k)},$$slots:{default:!0}}))}var be=j('<div class="mt-2 flex items-center"><p class="rounded-md px-2 py-0.5"> </p> <p> </p> <!></div>'),ye=j('<a href="/homework" class="relative grid gap-2 rounded-md border-[1px] border-accent px-4 py-6 transition active:scale-95"><p class="text-xl"> </p> <!> <!></a>'),$e=j('<a href="/homework" class="grid gap-2 rounded-md border-[1px] border-accent px-4 py-6 transition active:scale-95"><p class="text-xl"> </p> <div class="flex items-center"><p class="rounded-md px-2 py-0.5"> </p> <p class="mx-6 text-lg"> </p> <p class="flex-1 text-end"> </p></div></a>'),we=j('<a href="/homework" class="grid gap-2 rounded-md border-[1px] border-accent p-6 text-center text-lg transition active:scale-95"> </a>'),ke=j('<a class="rounded-md border-[1px] border-accent p-6 text-center text-lg transition active:scale-95" href="/timetable"> <span class="ml-6 rounded-md px-2 py-1"> </span></a>'),Te=j('<a class="rounded-md border-[1px] border-accent p-6 text-center text-lg transition active:scale-95" href="/timetable"> </a>'),Ie=j('<div class="grid w-full gap-4 px-8 py-16"><h1 class="py-8 text-center text-2xl font-semibold"><!></h1> <div><!></div> <!></div>');function Me(P,A){ee(A,!0);const q=Y(),p=()=>Z(ie,"$t",q);te(()=>{ce.currentTab=p()("titles.home")});let z=g(()=>Array.from(M.subjects).map(t=>t.homeworks).flat()),$=g(()=>e(z).filter(t=>!t.done)),k=g(()=>e(z).filter(t=>t.dueTo?Q(t.dueTo,new Date)<=1:!1)),T=g(()=>e(k).filter(t=>Q(t.dueTo,new Date)==0)),R=g(()=>e(T).length!=0?e(T).every(t=>t.done):e(k).every(t=>t.done)),D=g(()=>e(k).length==0?e($).sort((t,r)=>(t.dueTo??1/0)-(r.dueTo??1/0))[0]:null),K=g(()=>e(D)?M.get(e(D).subjectId):null);function U(t){const r=new Date,d=r.getDay()-1;if(d<0&&d>4)return null;const m=r.getHours(),a=r.getMinutes();let v=-1;for(const[u,s]of fe.entries())m<=s[0]&&(a<s[1]?v=u:v=u+1);return v>=0&&v<12?t[v*5+d]:null}let B=g(()=>U(pe));var E=Ie(),G=n(E),V=n(G);y(V,()=>e(z).length===0,t=>{var r=C();i(()=>c(r,p()("home.homework-label.none"))),o(t,r)},t=>{var r=H(),d=S(r);y(d,()=>e($).length===0,m=>{var a=C();i(()=>c(a,p()("home.homework-label.all-done"))),o(m,a)},m=>{var a=H(),v=S(a);y(v,()=>e($).length===1,u=>{var s=C();i(()=>c(s,p()("home.homework-label.one"))),o(u,s)},u=>{var s=H(),h=S(s);y(h,()=>e($).length<3,_=>{var x=C();i(()=>c(x,p()("home.homework-label.few",{values:{count:e($).length}}))),o(_,x)},_=>{var x=H(),N=S(x);y(N,()=>e($).length<6,f=>{var w=C();i(()=>c(w,p()("home.homework-label.many",{values:{count:e($).length}}))),o(f,w)},f=>{var w=C();i(()=>c(w,p()("home.homework-label.other",{values:{count:e($).length}}))),o(f,w)},!0),o(_,x)},!0),o(u,s)},!0),o(m,a)},!0),o(t,r)}),l(G);var J=b(G,2),W=n(J);y(W,()=>e(k).length!=0,t=>{var r=ye(),d=n(r),m=n(d);i(()=>c(m,`${p()("home.homework-for-"+(e(T).length>0?"today":"tomorrow"))??""}:`)),l(d);var a=b(d,2);le(a,17,()=>e(T).length>0?e(T):e(k),de,(u,s)=>{var h=be(),_=n(h);const x=g(()=>{var I;return`background-color: ${((I=M.get(e(s).subjectId))==null?void 0:I.color)??""}`});var N=n(_,!0);i(()=>{var I;return c(N,(I=M.get(e(s).subjectId))==null?void 0:I.name)}),l(_);var f=b(_,2);const w=g(()=>ve("mx-6 flex-1 text-lg",e(s).done&&"line-through opacity-50"));var F=n(f,!0);l(f);var L=b(f,2);y(L,()=>e(s).done,I=>{he(I,{size:18,class:"mr-4"})}),l(h),i(()=>{O(_,"style",e(x)),ue(_,"opacity-50",e(s).done),_e(f,e(w)),c(F,e(s).desc)}),o(u,h)});var v=b(a,2);y(v,()=>e(R),u=>{ge(u,{size:26,color:"green",transform:"rotate(350)",class:"absolute right-[-10px] top-[-10px]"})}),l(r),o(t,r)},t=>{var r=H(),d=S(r);y(d,()=>e(D),m=>{var a=$e(),v=n(a),u=n(v);i(()=>c(u,`${p()("home.homework-next")??""}:`)),l(v);var s=b(v,2),h=n(s),_=n(h,!0);l(h);var x=b(h,2),N=n(x,!0);l(x);var f=b(x,2),w=n(f,!0);i(()=>c(w,e(D).dueTo?me(e(D).dueTo,p()):"")),l(f),l(s),l(a),i(()=>{var F,L;O(h,"style",`background-color: ${((F=e(K))==null?void 0:F.color)??""}`),c(_,(L=e(K))==null?void 0:L.name),c(N,e(D).desc)}),o(m,a)},m=>{var a=we(),v=n(a,!0);i(()=>c(v,p()("home.goto-homeworks"))),l(a),o(m,a)},!0),o(t,r)}),l(J);var X=b(J,2);y(X,()=>e(B),t=>{var r=ke(),d=n(r);i(()=>c(d,`${p()("home.next-lesson")??""}: `));var m=b(d),a=n(m,!0);l(m),l(r),i(()=>{xe(m,"background-color",e(B).color),c(a,e(B).name)}),o(t,r)},t=>{var r=Te(),d=n(r,!0);i(()=>c(d,p()("home.goto-timetable"))),l(r),o(t,r)}),l(E),o(P,E),re()}export{Me as component};
